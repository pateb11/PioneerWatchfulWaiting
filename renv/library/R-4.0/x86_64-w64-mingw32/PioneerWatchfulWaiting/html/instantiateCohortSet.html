<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Instantiate a set of cohort</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for instantiateCohortSet {PioneerWatchfulWaiting}"><tr><td>instantiateCohortSet {PioneerWatchfulWaiting}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Instantiate a set of cohort</h2>

<h3>Description</h3>

<p>This function instantiates a set of cohort in the cohort table, using definitions that are fetched from a WebApi interface.
Optionally, the inclusion rule statistics are computed and stored in the <code>inclusionStatisticsFolder</code>.
</p>


<h3>Usage</h3>

<pre>
instantiateCohortSet(
  connectionDetails = NULL,
  connection = NULL,
  cdmDatabaseSchema,
  oracleTempSchema = NULL,
  cohortDatabaseSchema = cdmDatabaseSchema,
  cohortTable = "cohort",
  cohortIds = NULL,
  minCellCount,
  generateInclusionStats = FALSE,
  inclusionStatisticsFolder = NULL,
  createCohortTable = FALSE,
  incremental = FALSE,
  incrementalFolder = NULL
)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>connectionDetails</code></td>
<td>
<p>An object of type <code>connectionDetails</code> as created using the
<code><a href="../../DatabaseConnector/html/createConnectionDetails.html">createConnectionDetails</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connection</code> is
provided.</p>
</td></tr>
<tr valign="top"><td><code>connection</code></td>
<td>
<p>An object of type <code>connection</code> as created using the
<code><a href="../../DatabaseConnector/html/connect.html">connect</a></code> function in the
DatabaseConnector package. Can be left NULL if <code>connectionDetails</code>
is provided, in which case a new connection will be opened at the start
of the function, and closed when the function finishes.</p>
</td></tr>
<tr valign="top"><td><code>cdmDatabaseSchema</code></td>
<td>
<p>Schema name where your patient-level data in OMOP CDM format resides.
Note that for SQL Server, this should include both the database and
schema name, for example 'cdm_data.dbo'.</p>
</td></tr>
<tr valign="top"><td><code>oracleTempSchema</code></td>
<td>
<p>Should be used in Oracle to specify a schema where the user has write
privileges for storing temporary tables.</p>
</td></tr>
<tr valign="top"><td><code>cohortDatabaseSchema</code></td>
<td>
<p>Schema name where your cohort table resides. Note that for SQL Server,
this should include both the database and schema name, for example
'scratch.dbo'.</p>
</td></tr>
<tr valign="top"><td><code>cohortTable</code></td>
<td>
<p>Name of the cohort table.</p>
</td></tr>
<tr valign="top"><td><code>cohortIds</code></td>
<td>
<p>Optionally, provide a subset of cohort IDs to restrict the
construction to.</p>
</td></tr>
<tr valign="top"><td><code>generateInclusionStats</code></td>
<td>
<p>Compute and store inclusion rule statistics?</p>
</td></tr>
<tr valign="top"><td><code>inclusionStatisticsFolder</code></td>
<td>
<p>The folder where the inclusion rule statistics are stored. Can be
left NULL if <code>generateInclusionStats = FALSE</code>.</p>
</td></tr>
<tr valign="top"><td><code>createCohortTable</code></td>
<td>
<p>Create the cohort table? If <code>incremental = TRUE</code> and the table
already exists this will be skipped.</p>
</td></tr>
<tr valign="top"><td><code>incremental</code></td>
<td>
<p>Create only cohorts that haven't been created before?</p>
</td></tr>
<tr valign="top"><td><code>incrementalFolder</code></td>
<td>
<p>If <code>incremental = TRUE</code>, specify a folder where records are kept
of which definition has been executed.</p>
</td></tr>
<tr valign="top"><td><code>packageName</code></td>
<td>
<p>The name of the package containing the cohort definitions. Can be left NULL if 
<code>baseUrl</code> and <code>cohortSetReference</code> have been specified.</p>
</td></tr>
<tr valign="top"><td><code>cohortToCreateFile</code></td>
<td>
<p>The location of the cohortToCreate file within the package. Is ignored if 
<code>baseUrl</code> and <code>cohortSetReference</code> have been specified.</p>
</td></tr>
<tr valign="top"><td><code>baseUrl</code></td>
<td>
<p>The base URL for the WebApi instance, for example:
&quot;http://server.org:80/WebAPI&quot;. Can be left NULL if 
<code>packageName</code> and <code>cohortToCreateFile</code> have been specified.</p>
</td></tr>
<tr valign="top"><td><code>cohortSetReference</code></td>
<td>
<p>A data frame with four columns, as described in the details. Can be left NULL if 
<code>packageName</code> and <code>cohortToCreateFile</code> have been specified.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Currently two ways of executing this function are supported, either (1) embedded in a study package, assuming 
the cohort definitions are stored in that package using the <code>ROhdsiWebApi::insertCohortDefinitionSetInPackage</code>,
or (2) by using a WebApi interface to retrieve the cohort definitions.
</p>
<p>When using this function from within a study package, use the <code>packageName</code> and <code>cohortToCreateFile</code> to specify
the name of the study package, and the name of the cohortToCreate file within that package, respectively
</p>
<p>When using this function using a WebApi interface, use the <code>baseUrl</code> and <code>cohortSetReference</code> to specify how to 
connect to the WebApi, and which cohorts to fetch, respectively.
</p>
<p>The <code>cohortSetReference</code> argument must be a data frame with  the following columns:
</p>

<dl>
<dt>atlasId</dt><dd><p>The cohort ID in ATLAS.</p>
</dd>
<dt>atlasName</dt><dd><p>The full name of the cohort. This will be shown in the Shiny app.</p>
</dd>
<dt>cohortId</dt><dd><p>The cohort ID to use in the package. Usually the same as the cohort ID in ATLAS.</p>
</dd>
<dt>name</dt><dd><p>A short name for the cohort, to use to create file names. do not use special characters.</p>
</dd>
</dl>


<hr /><div style="text-align: center;">[Package <em>PioneerWatchfulWaiting</em> version 0.4.4 <a href="00Index.html">Index</a>]</div>
</body></html>
